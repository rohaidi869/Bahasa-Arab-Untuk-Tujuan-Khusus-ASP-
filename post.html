<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <title>Artikel</title>
</head>
<body>
  <div id="article-content"></div>
  <!-- 1. Muatkan articles.js dahulu -->
  <script src="articles.js"></script>
  <!-- 2. Kod JS yang paparkan artikel & insert form komen -->
  <script>
    function getQueryParam(name) {
      const url = new URL(window.location.href);
      return url.searchParams.get(name);
    }
    const articleId = getQueryParam('id');
    const article = articles.find(a => a.id === articleId);
    if (article) {
      document.getElementById('article-content').innerHTML = `
        <h1>${article.title}</h1>
        <div class="meta">${article.date} | ${article.category}</div>
        ${article.content}
        <div>${article.tags.map(t=>`<span class="tag">${t}</span>`).join(' ')}</div>
        <h3>Komen Pembaca</h3>
        <div id="senarai-komen"></div>
        <form id="komen-form">
          <label for="nama">Nama:</label>
          <input type="text" id="nama" placeholder="Nama anda" required>
          <label for="komen">Komen:</label>
          <textarea id="komen" placeholder="Tulis komen anda di sini" required></textarea>
          <button type="submit">Hantar Komen</button>
        </form>
      `;
    } else {
      document.getElementById('article-content').innerHTML = "<p>Artikel tidak dijumpai.</p>";
    }
  </script>
  <!-- 3. Muatkan komen.js SELEPAS form dimasukkan ke dalam halaman -->
  <script src="komen.js"></script>
  <script>
    // Pastikan loadKomen dan event handler dipasang selepas form wujud
    if (typeof articleId !== "undefined" && document.getElementById('komen-form')) {
      loadKomen(articleId);
      document.getElementById('komen-form').onsubmit = function(e) {
        submitKomen(e, articleId);
      };
    }
  </script>
</body>
</html>
